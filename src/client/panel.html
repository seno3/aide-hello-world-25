<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teach-Before-Apply</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1>🎓 Teach-Before-Apply</h1>
            <div class="header-controls">
                <button id="toggleVisualizer" class="btn btn-secondary">📊 Learning Map</button>
                <button id="exportLearnings" class="btn btn-secondary">📚 Export</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Teaching Card -->
            <div id="teachingCard" class="teaching-card hidden">
                <div class="card-header">
                    <h2 id="cardTitle">Learning Card</h2>
                    <div class="risk-badge" id="riskBadge"></div>
                </div>

                <!-- Risk Warning Banner -->
                <div id="riskWarning" class="risk-warning hidden">
                    <div class="warning-content">
                        <span class="warning-icon">⚠️</span>
                        <span id="warningText">High risk operation detected</span>
                    </div>
                </div>

                <!-- Why Section -->
                <div class="why-section">
                    <h3>🤔 Why?</h3>
                    <p id="summaryWhy"></p>
                </div>

                <!-- Code Diff -->
                <div class="diff-section">
                    <h3>📝 Code Changes</h3>
                    <pre id="codeDiff" class="code-block"></pre>
                    <div id="callouts" class="callouts"></div>
                </div>

                <!-- Micro Quiz -->
                <div class="quiz-section">
                    <h3>🧠 Quick Check</h3>
                    <div id="quizQuestion" class="quiz-question"></div>
                    <div id="quizChoices" class="quiz-choices"></div>
                    <div id="quizFill" class="quiz-fill hidden">
                        <input type="text" id="fillInput" placeholder="Your answer...">
                    </div>
                    <div id="quizFeedback" class="quiz-feedback hidden"></div>
                </div>

                <!-- Alternatives -->
                <div class="alternatives-section">
                    <h3>🔄 Alternative Approaches</h3>
                    <div id="alternatives" class="alternatives"></div>
                </div>

                <!-- Actions -->
                <div class="actions-section">
                    <div class="action-buttons">
                        <button id="applyBtn" class="btn btn-primary">✅ Apply</button>
                        <button id="skipBtn" class="btn btn-secondary">⏭️ Skip</button>
                        <button id="hintBtn" class="btn btn-outline">💡 Hint</button>
                        <button id="deepDiveBtn" class="btn btn-outline">🔍 Deep Dive</button>
                    </div>
                    <div class="next-step">
                        <strong>Next Step:</strong> <span id="nextStep"></span>
                    </div>
                </div>
            </div>

            <!-- Boss Fight Card -->
            <div id="bossCard" class="boss-card hidden">
                <div class="boss-header">
                    <h2 id="bossTitle">🐉 Boss Fight!</h2>
                    <div class="boss-health">
                        <div class="health-bar">
                            <div class="health-fill" id="bossHealth"></div>
                        </div>
                        <span id="bossHealthText">100%</span>
                    </div>
                </div>

                <div class="boss-content">
                    <div class="boss-description">
                        <h3 id="bossDescription"></h3>
                        <p id="bossChallenge"></p>
                    </div>

                    <div class="boss-code">
                        <h4>🐛 Buggy Code:</h4>
                        <pre id="buggyCode" class="code-block"></pre>
                    </div>

                    <div class="boss-test">
                        <h4>🧪 Test Output:</h4>
                        <pre id="testOutput" class="test-output"></pre>
                    </div>

                    <div class="boss-solution">
                        <h4>💡 Your Solution:</h4>
                        <textarea id="bossSolution" class="solution-input" placeholder="Fix the bug here..."></textarea>
                    </div>

                    <div class="boss-actions">
                        <button id="testSolution" class="btn btn-primary">⚔️ Test Solution</button>
                        <button id="getHint" class="btn btn-secondary">💡 Get Hint</button>
                        <button id="skipBoss" class="btn btn-outline">🏃 Skip Boss</button>
                    </div>

                    <div id="bossFeedback" class="boss-feedback hidden"></div>
                </div>
            </div>

            <!-- Learning Visualizer -->
            <div id="visualizer" class="visualizer hidden">
                <div class="visualizer-header">
                    <h3>🧬 Learning DNA Spiral</h3>
                    <button id="closeVisualizer" class="btn btn-outline">✕</button>
                </div>
                <div id="d3Container" class="d3-container"></div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state">
                <div class="empty-content">
                    <h2>🎯 Ready to Learn!</h2>
                    <p>Start coding and I'll help you understand what you're doing.</p>
                    <div class="empty-features">
                        <div class="feature">
                            <span class="feature-icon">📚</span>
                            <span>Learn before applying</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">🧠</span>
                            <span>Quick knowledge checks</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">🐉</span>
                            <span>Boss fight challenges</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading State -->
        <div id="loading" class="loading hidden">
            <div class="loading-spinner"></div>
            <p>Analyzing your code...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../media/d3.min.js"></script>
    <script src="visualizer.js"></script>
    <script src="panel.js"></script>
</body>
</html>
